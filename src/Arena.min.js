var Arena=function(t,i,s){console.log("Arena.new("+t+")");try{this.name=t,this.width=i,this.height=s,this.simulator=new Simulator(FPS),this.player=this.simulator.player,this.crosshair=new Sim(CROSSHAIR_DISPLAY,new Vec(0,0),45),this.camera=new Camera(this.simulator.player.position,0)}catch(e){console.log("ERROR(Arena.new): "+e)}};Arena.prototype.register=function(t,i){this.simulator.register(t,i)},Arena.prototype.update=function(){this.simulator.update(),this.paint()},Arena.prototype.paint=function(){try{ctx.canvas.width=this.width,ctx.canvas.height=this.height,ctx.fillStyle="#1e307b",ctx.fillRect(0,0,this.width,this.height),ctx.save(),ctx.translate(this.width/2,this.height/2),ctx.rotate(-FULL_CIRCLE/4);var t=this.player.speed.getNorm();t=1/Math.pow(1+t/1e3,.6),ctx.scale(.25+t,.25+t),this.camera.use();for(var i in this.simulator.decos)this.simulator.decos[i].paint();for(var i in this.simulator.shots)this.simulator.shots[i].paint();for(var i in this.simulator.ships)this.simulator.ships[i].paint();for(var i in this.simulator.impacts)this.simulator.impacts[i].paint();ctx.restore(),ctx.font="20px Georgia",ctx.strokeText("hull: ",10,50),ctx.strokeText("	"+this.player.life,10,70),ctx.strokeText("shields: ",10,90);for(var i in this.player.shields){var s=this.player.shields[i];ctx.strokeText("	"+s.life.toFixed(0)+"/"+s.maxLife,10,110)}}catch(e){console.log("ERROR(Arena.paint): "+e)}};